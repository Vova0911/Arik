import"./app.min.js";class r{constructor(){this.type="max",this.init()}init(){this.objects=[],this.daClassname="--dynamic",this.nodes=[...document.querySelectorAll("[data-fls-dynamic]")],this.nodes.forEach(a=>{const t=a.dataset.flsDynamic.trim().split(","),e={};e.element=a,e.parent=a.parentNode,e.destinationParent=t[3]&&a.closest(t[3].trim())||document,t[3]&&t[3].trim();const s=t[0]?t[0].trim():null;if(s){const i=e.destinationParent.querySelector(s);i&&(e.destination=i)}e.breakpoint=t[1]?t[1].trim():"767.98",e.place=t[2]?t[2].trim():"last",e.index=this.indexInParent(e.parent,e.element),this.objects.push(e)}),this.arraySort(this.objects),this.mediaQueries=this.objects.map(({breakpoint:a})=>`(${this.type}-width: ${a/16}em),${a}`).filter((a,t,e)=>e.indexOf(a)===t),this.mediaQueries.forEach(a=>{const t=a.split(","),e=window.matchMedia(t[0]),s=t[1],i=this.objects.filter(({breakpoint:n})=>n===s);e.addEventListener("change",()=>{this.mediaHandler(e,i)}),this.mediaHandler(e,i)})}mediaHandler(a,t){a.matches?t.forEach(e=>{e.destination&&this.moveTo(e.place,e.element,e.destination)}):t.forEach(({parent:e,element:s,index:i})=>{s.classList.contains(this.daClassname)&&this.moveBack(e,s,i)})}moveTo(a,t,e){t.classList.add(this.daClassname);const s=a==="last"||a==="first"?a:parseInt(a,10);s==="last"||s>=e.children.length?e.append(t):s==="first"?e.prepend(t):e.children[s].before(t)}moveBack(a,t,e){t.classList.remove(this.daClassname),a.children[e]!==void 0?a.children[e].before(t):a.append(t)}indexInParent(a,t){return[...a.children].indexOf(t)}arraySort(a){if(this.type==="min")a.sort((t,e)=>t.breakpoint===e.breakpoint?t.place===e.place?0:t.place==="first"||e.place==="last"?-1:t.place==="last"||e.place==="first"?1:0:t.breakpoint-e.breakpoint);else{a.sort((t,e)=>t.breakpoint===e.breakpoint?t.place===e.place?0:t.place==="first"||e.place==="last"?1:t.place==="last"||e.place==="first"?-1:0:e.breakpoint-t.breakpoint);return}}}document.querySelector("[data-fls-dynamic]")&&window.addEventListener("load",()=>new r);
